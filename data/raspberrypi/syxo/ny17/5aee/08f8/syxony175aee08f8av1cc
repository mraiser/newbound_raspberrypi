{"data":{"css":".dialgoeshere{\n  width:140px;\n  height:140px;\n  display:inline-block;\n}","data":[],"name":"temp","js":"var me = this;\nvar ME = $('#'+me.UUID)[0];\n\nme.data = {};\n\nif (ME.DATA.peer){\n  if (ME.DATA.peer != 'local') me.peer = ME.DATA.peer;\n}\nelse me.peer = typeof CURRENTDEVICEID == 'undefined' ? null : CURRENTDEVICEID;\n\nvar prefix = me.peer && me.peer != 'local' ? '../peerbot/remote/'+me.peer+'/' : '../';\n\nme.ready = function(){\n  componentHandler.upgradeAllRegistered();\n\n  json(prefix+'raspberrypi/temp', null, function(result){\n    var i = result.msg.indexOf('=');\n    var x = result.msg.indexOf(\"'\");\n    var tempc = Number(result.msg.substring(i+1,x));\n    var tempf = (tempc * 9/5) + 32;\n    \n    var title = ME.DATA.title ? ME.DATA.title : \"Board Temp\";\n    ME.DATA.title = title;\n    var d = {\n      value: tempf.toFixed(1),\n      units: \"f\",\n      title: title,\n      range: [-30,130]\n    };\n    \n    var el = $('<div class=\"raspitemp iconmode\"/>');\n    $(ME).find('.dialgoeshere').html(el);\n    el.data(\"data\", d);\n    installControl(el[0], \"metabot\", \"dial\", function(api){\n      updateDial(el);\n    }, d);\n    \n  });\n};\n  \nfunction updateDial(el){\n  if ($('#'+me.UUID)[0] == ME){\n    var d = el.data(\"data\");\n    var api = el[0].api;\n    json(prefix+'raspberrypi/temp', null, function(result){\n      var i = result.msg.indexOf('=');\n      var x = result.msg.indexOf(\"'\");\n      var tempc = Number(result.msg.substring(i+1,x));\n      var tempf = (tempc * 9/5) + 32;\n\n      api.update(tempf.toFixed(1));\n      setTimeout(function(){\n        updateDial(el);\n      }, 3000);\n    });\n  }\n}\n\n$(document).click(function(event) {\n   window.lastElementClicked = event.target;\n});\n","groups":"trusted","ctl":"syxony175aee08f8av1cc","html":"<div class='dialgoeshere'><img src='../botmanager/asset/raspberrypi/loading_trippy.gif'><\/div>","cmd":[{"java":"muwggu175aee128d7q1da","name":"temp","id":"soyngz175aee128ddi1db"}],"three":{"controls":[]},"db":"raspberrypi","desc":""},"readers":["trusted"],"id":"syxony175aee08f8av1cc","sessionid":"jvgvwg16b7a4d277bt3","time":1604956812658,"addr":"/0:0:0:0:0:0:0:1:35866","username":"admin"}