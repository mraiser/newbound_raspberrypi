{"data":{"css":".dialgoeshere{\n  width:140px;\n  height:140px;\n  display:inline-block;\n}\n","data":[],"name":"memory","js":"var me = this;\nvar ME = $('#'+me.UUID)[0];\n\nme.data = {};\n\nif (ME.DATA.peer){\n  if (ME.DATA.peer != 'local') me.peer = ME.DATA.peer;\n}\nelse me.peer = typeof CURRENTDEVICEID == 'undefined' ? null : CURRENTDEVICEID;\n\nme.ready = function(){\n  componentHandler.upgradeAllRegistered();\n  var el = $('<div class=\"raspi_meminfo iconmode\"/>');\n  updateDial(el);\n};\n\nfunction updateDial(el){\n  send_meminfo(function(result){\n    var a = result.data.MemTotal.split(' ');\n    // var unit = a[1];\n    var total = Number(a[0]);\n    a = result.data.MemFree.split(' ');\n    var free = Number(a[0]);\n    var p = 100-(100*free/total);\n    \n    var unit = \"kb\";\n    var base = 1;\n    if (total > base * 1024) { base *= 1024; unit = \"mb\"; }\n    if (total > base * 1024) { base *= 1024; unit = \"gb\"; }\n    if (total > base * 1024) { base *= 1024; unit = \"tb\"; }\n    \n    if (!$(ME).find(el[0])[0]){\n      $(ME).find('.dialgoeshere').html(el);\n      var title = ME.DATA.title ? ME.DATA.title : \"Memory Used\";\n      var d = {\n        value: p.toFixed(1),\n        units: \"% of \"+(total/base).toFixed(1)+unit,\n        title: title,\n        range: [0,100]\n      };\n      installControl(el[0], \"metabot\", \"dial\", function(api){\n        setTimeout(function(){\n          updateDial(el);\n        }, 3000);\n      }, d);\n    }\n    else {\n      var api = el[0].api;\n      api.update(p.toFixed(1));\n      setTimeout(function(){\n        updateDial(el);\n      }, 3000);\n    }  \n  }, me.peer);\n}\n","groups":"trusted","ctl":"qzpzyr175aed9a370z134","html":"<div class='dialgoeshere'><img src='../botmanager/asset/raspberrypi/loading_trippy.gif'><\/div>","cmd":[{"java":"jtrszm175aeda5e8ch145","name":"meminfo","id":"smvqnu175aeda5e90i146"}],"three":{"controls":[]},"db":"raspberrypi","desc":""},"readers":["trusted"],"id":"qzpzyr175aed9a370z134","sessionid":"jvgvwg16b7a4d277bt3","time":1604956378150,"addr":"/0:0:0:0:0:0:0:1:35490","username":"admin"}