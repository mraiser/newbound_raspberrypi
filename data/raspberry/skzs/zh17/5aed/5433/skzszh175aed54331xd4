{"data":{"css":".dialgoeshere{\n  width:140px;\n  height:140px;\n  display:inline-block;\n}\n","data":[],"name":"disk","js":"var me = this;\nvar ME = $('#'+me.UUID)[0];\n\nme.data = {};\n\nif (ME.DATA.peer){\n  if (ME.DATA.peer != 'local') me.peer = ME.DATA.peer;\n}\nelse me.peer = typeof CURRENTDEVICEID == 'undefined' ? null : CURRENTDEVICEID;\n\nme.ready = function(){\n  componentHandler.upgradeAllRegistered();\n  var el = $('<div class=\"raspi_diskinfo iconmode\"/>');\n  updateDial(el);\n};\n\nfunction updateDial(el){\n  send_stats(function(result){\n    var el = $('<div class=\"raspi_diskinfo iconmode\"/>');\n    var total = result.data.total;\n    var unused = result.data.usable;\n    var title = ME.DATA.title ? ME.DATA.title : \"Disk Used\";\n    var unit = \"b\";\n    var base = 1;\n    if (total > base * 1024) { base *= 1024; unit = \"kb\"; }\n    if (total > base * 1024) { base *= 1024; unit = \"mb\"; }\n    if (total > base * 1024) { base *= 1024; unit = \"gb\"; }\n    if (total > base * 1024) { base *= 1024; unit = \"tb\"; }\n    var p = 100 * (total - unused) / total;\n\n    if (!$(ME).find(el[0])[0]){\n      $(ME).find('.dialgoeshere').html(el);\n      var d = {\n        value: p.toFixed(1),\n        units: \"% of \"+(total/base).toFixed(1)+unit,\n        title: title,\n        range: [0,100]\n      };\n    \n      installControl(el[0], \"metabot\", \"dial\", function(api){\n        setTimeout(function(){\n          updateDial(el);\n        }, 3000);\n      }, d);\n    }\n    else {\n      var api = el[0].api;\n      api.update(p.toFixed(1));\n      setTimeout(function(){\n        updateDial(el);\n      }, 3000);\n    } \n  }, me.peer);\n}","groups":"trusted","ctl":"skzszh175aed54331xd4","html":"<div class='dialgoeshere'><img src='../botmanager/asset/raspberrypi/loading_trippy.gif'><\/div>","cmd":[{"java":"ggrlzr175aed6efd5of9","name":"stats","id":"rsxijg175aed6efd7rfa"}],"three":{"controls":[]},"db":"raspberrypi","desc":""},"readers":["trusted"],"id":"skzszh175aed54331xd4","time":1604956201052,"addr":"/0:0:0:0:0:0:0:1:35190","username":"admin"}